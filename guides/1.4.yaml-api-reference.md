# Flow Test Engine - YAML API Reference

> **Vers√£o:** 1.0
> **√öltima Atualiza√ß√£o:** 10 de outubro de 2025
> **Status:** Documenta√ß√£o Completa ‚úÖ

## üìö √çndice Naveg√°vel

### üèóÔ∏è Estrutura e Configura√ß√£o
- [1. TestSuite (Estrutura Base)](#1-testsuite-estrutura-base)
- [2. TestStep (Propriedades dos Steps)](#2-teststep-propriedades-dos-steps)
- [16. Execution Modes](#16-execution-modes)
- [17. Priority Levels](#17-priority-levels)
- [18. Tags](#18-tags)

### üîÑ Vari√°veis e Interpola√ß√£o
- [3. Sistema de Interpola√ß√£o](#3-sistema-de-interpola√ß√£o)
  - [3.1 Sintaxe B√°sica](#31-sintaxe-e-fontes)
  - [3.2 Faker.js](#32-fakerjs---categorias-principais)
  - [3.3 JavaScript Expressions](#33-javascript-expressions)
- [14. Escopo de Vari√°veis](#14-escopo-de-vari√°veis)

### ‚úÖ Valida√ß√£o e Assertions
- [4. Assertions (Valida√ß√µes)](#4-assertions-valida√ß√µes)
  - [4.1 Estrutura](#41-estrutura-de-assertions)
  - [4.2 Operadores](#42-operadores-de-asser√ß√£o-assertionchecks)
  - [4.3 Tipos Suportados](#43-tipos-suportados)
  - [4.4 Valida√ß√£o de Length](#44-valida√ß√£o-de-length)
  - [4.5 Custom Assertions](#45-custom-assertions)
- [5. Extra√ß√£o de Dados (JMESPath)](#5-extra√ß√£o-de-dados---capture-jmespath)

### üí¨ Input e Intera√ß√£o
- [6. Input Interativo](#6-input-interativo-inputconfig)
  - [6.1 Propriedades](#61-propriedades-base)
  - [6.2 Tipos de Input](#62-tipos-de-input)
  - [6.3 Options](#63-options-para-select)
  - [6.4 Valida√ß√£o](#64-input-validation)

### üîÅ Controle de Fluxo
- [7. Itera√ß√£o](#7-itera√ß√£o-iterationconfig)
  - [7.1 Array Iteration](#71-array-iteration)
  - [7.2 Range Iteration](#72-range-iteration)
- [8. Cen√°rios Condicionais](#8-cen√°rios-condicionais-conditionalscenario)
- [9. Step Call Cross-Suite](#9-step-call-cross-suite-stepcallconfig)

### ‚öôÔ∏è Configura√ß√µes Avan√ßadas
- [10. Tipos de Dados](#10-tipos-de-dados-e-valores-especiais)
- [11. Retry](#11-configura√ß√£o-de-retry)
- [12. Timeouts](#12-timeouts)
- [13. URLs](#13-resolu√ß√£o-de-urls)
- [15. Response Structure](#15-response-object-structure)

### ÔøΩ Diagramas e Visualiza√ß√µes
- [19. Diagramas e Fluxos](#19-diagramas-e-fluxos-de-execu√ß√£o)
  - [19.1 Fluxo de Execu√ß√£o Geral](#191-fluxo-de-execu√ß√£o-geral)
  - [19.2 Fluxo de Vari√°veis](#192-fluxo-de-vari√°veis)
  - [19.3 Interpola√ß√£o](#193-interpola√ß√£o-de-vari√°veis---processo)
  - [19.4 Cen√°rios Condicionais](#194-fluxo-de-cen√°rios-condicionais)
  - [19.5 Itera√ß√£o](#195-itera√ß√£o---fluxo)
  - [19.6 Dependency Resolution](#196-dependency-resolution)
  - [19.7 Step Call](#197-step-call-cross-suite)
  - [19.8 Retry Logic](#198-retry-logic)

### ÔøΩüìñ Exemplos e Ajuda
- [20. Exemplos Pr√°ticos](#20-exemplos-pr√°ticos-completos)
- [21. Troubleshooting](#21-guia-de-troubleshooting)
- [22. Limita√ß√µes](#22-limita√ß√µes-conhecidas)

---

## üöÄ Quick Start

### Estrutura M√≠nima

```yaml
node_id: "meu-teste"
suite_name: "Meu Primeiro Teste"
base_url: "https://api.example.com"

steps:
  - name: "Fazer requisi√ß√£o"
    request:
      method: GET
      url: "/endpoint"
    assert:
      status_code: 200
```

### Exemplo Completo

```yaml
node_id: "user-management"
suite_name: "User Management Tests"
base_url: "{{api_base_url}}"
execution_mode: "sequential"

metadata:
  priority: "high"
  tags: ["users", "crud"]
  timeout: 30000

variables:
  test_user_email: "{{$faker.internet.email}}"

exports: ["created_user_id"]

depends:
  - path: "./auth-setup.yaml"
    required: true

steps:
  - name: "Create user"
    request:
      method: POST
      url: "/users"
      headers:
        Authorization: "Bearer {{auth-setup.token}}"
      body:
        email: "{{test_user_email}}"
        name: "{{$faker.person.fullName}}"
    assert:
      status_code: 201
      body:
        id: {exists: true}
        email: {equals: "{{test_user_email}}"}
    capture:
      created_user_id: "body.id"
```

---

## 1. TestSuite (Estrutura Base)

### Propriedades Principais

| Propriedade | Tipo | Obrigat√≥rio | Padr√£o | Descri√ß√£o |
|-------------|------|-------------|--------|-----------|
| `node_id` | `string` | ‚úÖ | - | Identificador √∫nico (kebab-case) |
| `suite_name` | `string` | ‚úÖ | - | Nome descritivo da su√≠te |
| `description` | `string` | ‚ùå | - | Descri√ß√£o detalhada |
| `base_url` | `string` | ‚ùå | - | URL base para requests relativos |
| `execution_mode` | `"sequential" \| "parallel"` | ‚ùå | `"sequential"` | Modo de execu√ß√£o |
| `variables` | `Record<string, any>` | ‚ùå | `{}` | Vari√°veis locais |
| `exports` | `string[]` | ‚ùå | `[]` | Vari√°veis para exportar |
| `exports_optional` | `string[]` | ‚ùå | `[]` | Exports opcionais |
| `depends` | `FlowDependency[]` | ‚ùå | `[]` | Depend√™ncias |
| `steps` | `TestStep[]` | ‚úÖ | - | Passos de teste |
| `metadata` | `SuiteMetadata` | ‚ùå | - | Metadados |

### Suite Metadata

```yaml
metadata:
  priority: "critical"        # critical|high|medium|low
  tags: ["smoke", "auth"]     # Categoriza√ß√£o
  timeout: 30000              # Timeout geral em ms
  estimated_duration_ms: 5000 # Dura√ß√£o estimada
  requires_user_input: false  # Flag para inputs
```

### Flow Dependency

```yaml
depends:
  # Caminho relativo (padr√£o)
  - path: "./auth/login.yaml"
    required: true
    cache: 300  # TTL em segundos

  # Caminho absoluto (a partir de test_directory)
  - path: "common/setup.yaml"
    path_type: "absolute"
    required: true

  # Por node_id
  - node_id: "auth-setup"
    cache: true

  # Com condi√ß√£o
  - path: "./optional.yaml"
    condition: "environment == 'dev'"

  # Com vari√°veis e retry
  - path: "./database-setup.yaml"
    variables:
      db_name: "test_db"
    retry:
      max_attempts: 3
      delay_ms: 1000
```

---

## 2. TestStep (Propriedades dos Steps)

### Propriedades Principais

| Propriedade | Tipo | Obrigat√≥rio | Descri√ß√£o |
|-------------|------|-------------|-----------|
| `name` | `string` | ‚úÖ | Nome do passo |
| `step_id` | `string` | ‚ùå | ID √∫nico do passo |
| `request` | `RequestDetails` | Condicional* | Configura√ß√£o HTTP |
| `assert` | `Assertions` | ‚ùå | Valida√ß√µes |
| `capture` | `Record<string, string>` | ‚ùå | Extra√ß√µes JMESPath |
| `input` | `InputConfig \| InputConfig[]` | ‚ùå | Input interativo |
| `call` | `StepCallConfig` | ‚ùå | Chamada cross-suite |
| `iterate` | `IterationConfig` | ‚ùå | Loop |
| `scenarios` | `ConditionalScenario[]` | ‚ùå | Condicionais |
| `continue_on_failure` | `boolean` | ‚ùå | Continuar em falha |
| `metadata` | `TestStepMetadata` | ‚ùå | Metadados |

> *`request` √© opcional apenas se houver `input` ou `call`

### Request Details

```yaml
request:
  method: POST              # GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS
  url: "/api/users"         # Absoluta ou relativa
  headers:
    Content-Type: "application/json"
    Authorization: "Bearer {{token}}"
  body:
    name: "John Doe"
    email: "john@example.com"
  params:                   # Query string
    page: 1
    limit: 10
  timeout: 30000            # ms
```

### Step Metadata

```yaml
metadata:
  priority: "high"
  tags: ["critical"]
  timeout: 10000
  retry:
    max_attempts: 3
    delay_ms: 1000
  depends_on: ["step-1", "step-2"]
  description: "Creates user account"
  skip: "{{environment}} === 'prod'"  # Condi√ß√£o para pular
```

---

## 3. Sistema de Interpola√ß√£o

### 3.1 Sintaxe e Fontes

| Tipo | Sintaxe | Exemplo | Resultado |
|------|---------|---------|-----------|
| **B√°sica** | `{{var}}` | `{{user_id}}` | Vari√°vel local/capturada |
| **Aninhada** | `{{obj.field}}` | `{{user.profile.name}}` | Acesso profundo |
| **Array** | `{{arr[i]}}` | `{{items[0].id}}` | Por √≠ndice |
| **Cross-suite** | `{{suite-id.var}}` | `{{auth.token}}` | Entre suites |
| **Ambiente** | `{{$env.VAR}}` | `{{$env.API_KEY}}` | L√™ `FLOW_TEST_API_KEY` |
| **Faker** | `{{$faker.x.y}}` | `{{$faker.internet.email}}` | Dados fake |
| **JavaScript** | `{{$js:expr}}` | `{{$js:Date.now()}}` | Express√£o JS |

### 3.2 Faker.js - Categorias Principais

| Categoria | Exemplos | Uso |
|-----------|----------|-----|
| `person` | `firstName`, `lastName`, `fullName` | Nomes |
| `internet` | `email`, `url`, `userName`, `password` | Web |
| `phone` | `number`, `imei` | Telefones |
| `location` | `city`, `country`, `streetAddress` | Geografia |
| `commerce` | `productName`, `price`, `department` | Com√©rcio |
| `company` | `name`, `catchPhrase`, `bs` | Empresas |
| `string` | `uuid`, `alphanumeric`, `numeric` | Strings |
| `number` | `int`, `float`, `binary` | N√∫meros |
| `date` | `past`, `future`, `recent`, `soon` | Datas |
| `lorem` | `word`, `words`, `sentence`, `paragraph` | Texto |

```yaml
variables:
  user_email: "{{$faker.internet.email}}"           # test@example.com
  user_name: "{{$faker.person.fullName}}"           # John Doe
  user_phone: "{{$faker.phone.number}}"             # +1234567890
  product_price: "{{$faker.commerce.price}}"        # 49.99
  uuid: "{{$faker.string.uuid}}"                    # 123e4567-e89b...
  random_int: "{{$faker.number.int({min: 1, max: 100})}}"  # 42
```

### 3.3 JavaScript Expressions

```yaml
computed:
  timestamp: "{{$js:Date.now()}}"                   # 1704110400000
  iso_date: "{{$js:new Date().toISOString()}}"      # 2024-01-01T12:00:00.000Z
  random: "{{$js:Math.random()}}"                   # 0.123456789
  calculation: "{{$js:{{price}} * {{quantity}}}}"   # Resultado do c√°lculo
  rounded: "{{$js:Math.round({{value}}\)}}}"        # Valor arredondado
  base64: "{{$js:Buffer.from('text').toString('base64')}}"  # dGV4dA==
  json_parse: "{{$js:JSON.parse('{{json_string}}')}}"       # Objeto parseado
```

---

## 4. Assertions (Valida√ß√µes)

### 4.1 Estrutura de Assertions

```yaml
assert:
  # Shorthand para status
  status_code: 200

  # Valida√ß√µes do body
  body:
    user.id: {exists: true, type: "number"}
    user.email: {regex: "^[\\w.-]+@[\\w.-]+\\.\\w+$"}
    items: {length: {greater_than: 0}}

  # Headers
  headers:
    content-type: {contains: "json"}

  # Response time
  response_time_ms:
    less_than: 2000
    greater_than: 10

  # Custom
  custom:
    - name: "Valid ID"
      condition: "body.id > 0"
      message: "ID must be positive"
```

### 4.2 Operadores de Asser√ß√£o (AssertionChecks)

| Operador | Tipo | Descri√ß√£o | Exemplo |
|----------|------|-----------|---------|
| `equals` | `any` | Igualdade exata | `{equals: 200}` |
| `not_equals` | `any` | Diferente de | `{not_equals: null}` |
| `contains` | `any` | Cont√©m valor | `{contains: "success"}` |
| `not_contains` | `any` | N√£o cont√©m | `{not_contains: "error"}` |
| `greater_than` | `number` | Maior que | `{greater_than: 0}` |
| `less_than` | `number` | Menor que | `{less_than: 1000}` |
| `greater_than_or_equal` | `number` | ‚â• | `{greater_than_or_equal: 1}` |
| `less_than_or_equal` | `number` | ‚â§ | `{less_than_or_equal: 100}` |
| `regex` | `string` | Padr√£o regex | `{regex: "^[a-z]+$"}` |
| `pattern` | `string` | Alias de regex | `{pattern: "\\d{3}"}` |
| `exists` | `boolean` | Campo existe | `{exists: true}` |
| `not_exists` | `boolean` | Campo n√£o existe | `{exists: false}` |
| `type` | `string` | Tipo do valor | `{type: "string"}` |
| `length` | `object` | Tamanho | `{length: {equals: 5}}` |
| `minLength` | `number` | Tamanho m√≠n. | `{minLength: 3}` |
| `notEmpty` | `boolean` | N√£o vazio | `{notEmpty: true}` |
| `in` | `any[]` | Est√° na lista | `{in: ["active", "pending"]}` |
| `not_in` | `any[]` | N√£o est√° na lista | `{not_in: ["deleted"]}` |

### 4.3 Tipos Suportados

- `"string"` - Texto
- `"number"` - N√∫mero (int/float)
- `"boolean"` - Booleano
- `"array"` - Lista
- `"object"` - Objeto
- `"null"` - Nulo

### 4.4 Valida√ß√£o de Length

```yaml
body:
  items:
    length:
      equals: 10              # Exatamente 10
      greater_than: 0         # Mais de 0
      less_than: 100          # Menos de 100
      greater_than_or_equal: 5
      less_than_or_equal: 50
```

### 4.5 Custom Assertions

```yaml
custom:
  - name: "Valid user ID format"
    condition: "body.user.id && typeof body.user.id === 'number'"
    message: "User ID must be a number"

  - name: "Email matches username"
    condition: "body.email.startsWith(body.username)"
    message: "Email should start with username"
```

---

## 5. Extra√ß√£o de Dados - Capture (JMESPath)

### Sintaxe B√°sica

| Padr√£o | Descri√ß√£o | Exemplo | Resultado |
|--------|-----------|---------|-----------|
| Campo simples | Acesso direto | `body.token` | Valor do campo |
| Aninhado | Navega√ß√£o | `body.user.profile.name` | Valor profundo |
| Array √≠ndice | Posicional | `body.items[0]` | Primeiro item |
| Array negativo | Reverso | `body.items[-1]` | √öltimo item |
| Proje√ß√£o | Mapear | `body.data[*].id` | Array de IDs |
| Completo | Tudo | `@` | Resposta inteira |
| Status | HTTP code | `status` | 200, 404, etc. |
| Headers | Cabe√ßalhos | `headers.Content-Type` | Valor do header |

### Opera√ß√µes Avan√ßadas

```yaml
capture:
  # Filtros
  active_users: "users[?status=='active']"
  expensive_items: "items[?price > `100`]"

  # Proje√ß√µes customizadas
  user_list: "users[*].{id: id, name: name, email: email}"

  # Fun√ß√µes
  total_count: "length(items)"
  max_price: "max(products[*].price)"
  min_price: "min(products[*].price)"

  # Ordena√ß√£o
  sorted_items: "sort_by(items, &created_at)"

  # Flatten
  all_tags: "posts[].tags[]"

  # Pipes
  first_five: "items | [0:5]"

  # Contains
  has_admin: "contains(roles, 'admin')"
```

---

## 6. Input Interativo (InputConfig)

### 6.1 Propriedades Base

```yaml
input:
  prompt: "Enter your API key:"       # OBRIGAT√ìRIO
  variable: "api_key"                  # OBRIGAT√ìRIO
  type: "password"                     # OBRIGAT√ìRIO
  description: "API key for auth"
  default: "default_value"
  placeholder: "sk-..."
  required: true
  style: "boxed"                       # simple|boxed|highlighted
  timeout_seconds: 60
  condition: "{{status}} == 200"
  ci_default: "{{$env.CI_API_KEY}}"
  validation: {...}
  dynamic: {...}
  options: [...]                       # Para select/multiselect
```

### 6.2 Tipos de Input

| Tipo | Descri√ß√£o | Use Case |
|------|-----------|----------|
| `text` | Texto simples | Nomes, IDs |
| `password` | Mascarado | Senhas, tokens |
| `number` | Num√©rico | Quantidades |
| `email` | Email validado | Endere√ßos |
| `url` | URL validada | Links |
| `select` | Sele√ß√£o √∫nica | Escolher op√ß√£o |
| `multiselect` | M√∫ltipla sele√ß√£o | V√°rias op√ß√µes |
| `confirm` | Sim/N√£o | Confirma√ß√µes |
| `multiline` | Multilinha | JSON, descri√ß√µes |

### 6.3 Options para Select

```yaml
# Est√°tico
options:
  - {value: "dev", label: "Development"}
  - {value: "prod", label: "Production"}

# De vari√°vel
options: "{{environments}}"
value_path: "id"
label_path: "name"

# JMESPath
options: "{{users[*].{value: id, label: name}}}"
```

### 6.4 Input Validation

```yaml
validation:
  min_length: 5
  max_length: 100
  pattern: "^[a-zA-Z0-9]+$"
  min: 0
  max: 100
  custom_validation: "value.length > 3"
  expressions:
    - name: "Valid format"
      expression: "value.startsWith('sk-')"
      message: "Must start with sk-"
      severity: "error"      # error|warning
```

---

## 7. Itera√ß√£o (IterationConfig)

### 7.1 Array Iteration

```yaml
- name: "Process {{user.name}}"
  iterate:
    over: "{{test_users}}"    # Array ou express√£o
    as: "user"                # Nome da vari√°vel
  request:
    method: POST
    url: "/users"
    body:
      name: "{{user.name}}"
      email: "{{user.email}}"
```

### 7.2 Range Iteration

```yaml
- name: "Test page {{page}}"
  iterate:
    range: "1..10"            # start..end (inclusive)
    as: "page"
  request:
    method: GET
    url: "/items?page={{page}}"
```

### Iteration Context

Durante a itera√ß√£o, est√£o dispon√≠veis:
- `{{<as_variable>}}` - Valor atual
- `_iteration.index` - √çndice (0-based)
- `_iteration.isFirst` - Primeira itera√ß√£o
- `_iteration.isLast` - √öltima itera√ß√£o

---

## 8. Cen√°rios Condicionais (ConditionalScenario)

```yaml
scenarios:
  - name: "Success path"
    condition: "status_code == `200`"  # JMESPath
    then:
      assert:
        body:
          success: {equals: true}
      capture:
        result_id: "body.id"
      variables:
        operation_succeeded: true
      steps:                             # Apenas em 'then'
        - name: "Verify result"
          request:
            method: GET
            url: "/verify/{{result_id}}"

  - name: "Error path"
    condition: "status_code >= `400`"
    then:
      assert:
        body:
          error: {exists: true}
      variables:
        operation_failed: true
    else:
      variables:
        operation_succeeded: true
```

### Operadores em Condi√ß√µes

- `==`, `!=` - Igualdade
- `<`, `<=`, `>`, `>=` - Compara√ß√£o
- `&&` - E l√≥gico
- `||` - OU l√≥gico
- `!` - Nega√ß√£o

> Literais num√©ricos: `` `200` ``
> Strings: `'text'`

---

## 9. Step Call Cross-Suite (StepCallConfig)

```yaml
call:
  test: "../auth/login.yaml"          # Caminho do arquivo
  path_type: "relative"                # relative|absolute
  step: "login-step"                   # ID ou nome do step
  variables:                           # Injetar vari√°veis
    username: "{{test_user}}"
    password: "{{test_pass}}"
  isolate_context: true                # Namespace de vari√°veis
  on_error: "fail"                     # fail|continue|warn
  timeout: 30000
  retry:
    max_attempts: 3
    delay_ms: 1000
```

### Comportamento de Isolamento

| `isolate_context` | Comportamento |
|-------------------|---------------|
| `true` (padr√£o) | Vari√°veis em `{{step-id.variable}}` |
| `false` | Vari√°veis mesclam no escopo pai |

---

## 10. Tipos de Dados e Valores Especiais

### Primitivos

```yaml
variables:
  text: "Hello"              # string
  number: 42                 # number
  decimal: 3.14              # number
  active: true               # boolean
  empty: null                # null
  list: [1, 2, 3]            # array
  object:                    # object
    key: "value"
```

### Response Object

```typescript
{
  status: 200,               // C√≥digo HTTP
  status_code: 200,          // Alias
  headers: {...},            // Headers da resposta
  body: {...},               // Corpo parseado
  data: {...},               // Alias para body (axios)
  response_time_ms: 123      // Tempo de resposta
}
```

---

## 11. Configura√ß√£o de Retry

```yaml
# No step metadata
metadata:
  retry:
    max_attempts: 3
    delay_ms: 1000

# Em dependency
depends:
  - path: "./setup.yaml"
    retry:
      max_attempts: 2
      delay_ms: 500

# Em call
call:
  test: "./external.yaml"
  step: "api-call"
  retry:
    max_attempts: 5
    delay_ms: 2000
```

---

## 12. Timeouts

| N√≠vel | Propriedade | Escopo | Padr√£o |
|-------|-------------|--------|--------|
| Global | `config.timeout` | Todas requisi√ß√µes | Config |
| Suite | `metadata.timeout` | Suite inteira | Sem limite |
| Step | `metadata.timeout` | Step espec√≠fico | Herda |
| Request | `request.timeout` | HTTP individual | 30000 ms |
| Input | `input.timeout_seconds` | Input interativo | Sem limite |
| Call | `call.timeout` | Cross-suite | Herda |

---

## 13. Resolu√ß√£o de URLs

| URL no Step | Base URL | Resultado |
|-------------|----------|-----------|
| `/api/users` | `https://api.example.com` | `https://api.example.com/api/users` |
| `users` | `https://api.example.com` | `https://api.example.com/users` |
| `https://other.com/api` | Qualquer | `https://other.com/api` |
| `http://localhost:8080` | Qualquer | `http://localhost:8080` |

---

## 14. Escopo de Vari√°veis

| Escopo | Defini√ß√£o | Acesso | Persist√™ncia |
|--------|-----------|--------|--------------|
| **Local** | `variables` | Suite atual | Dura√ß√£o da suite |
| **Runtime** | Capturadas | Steps seguintes | Dura√ß√£o da suite |
| **Global** | `exports` | `{{suite-id.var}}` | Toda execu√ß√£o |
| **Environment** | Sistema | `{{$env.VAR}}` | Permanente |
| **Dynamic** | Input | Conforme config | Configur√°vel |

### Ordem de Preced√™ncia (maior ‚Üí menor)

1. Vari√°veis runtime (step atual)
2. Vari√°veis de itera√ß√£o (`as`)
3. Vari√°veis locais
4. Vari√°veis de dependencies
5. Vari√°veis globais (`exports`)
6. Vari√°veis de ambiente

---

## 15. Response Object Structure

```typescript
interface Response {
  status: number;              // 200, 404, etc.
  status_code: number;         // Alias
  headers: Record<string, string>;
  body: any;                   // JSON parseado ou string
  data: any;                   // Alias para body
  response_time_ms: number;    // Tempo de resposta
}
```

---

## 16. Execution Modes

| Mode | Descri√ß√£o | Use Case | Restri√ß√µes |
|------|-----------|----------|------------|
| `sequential` | Ordem sequencial | Com depend√™ncias | Nenhuma |
| `parallel` | Simult√¢neo | Independentes | Sem `input` |

---

## 17. Priority Levels

| N√≠vel | Uso |
|-------|-----|
| `critical` | Smoke tests, core |
| `high` | Funcionalidades importantes |
| `medium` | Regression padr√£o |
| `low` | Edge cases |

```bash
npx flow-test-engine --priority critical,high
```

---

## 18. Tags

Exemplos comuns:
- `smoke`, `regression`, `auth`
- `api`, `e2e`, `integration`
- `performance`, `security`

```bash
npx flow-test-engine --tags smoke,auth
```

---

## 19. Diagramas e Fluxos de Execu√ß√£o

### 19.1 Fluxo de Execu√ß√£o Geral

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    FLOW TEST ENGINE                             ‚îÇ
‚îÇ                     Ciclo de Vida                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Discovery  ‚îÇ  1. Descobre arquivos .yaml
    ‚îÇ   (Config)   ‚îÇ  2. Valida estrutura
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  3. Resolve depend√™ncias
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Dependency   ‚îÇ  4. Ordena por depends
    ‚îÇ  Resolution  ‚îÇ  5. Detecta ciclos
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  6. Valida cache
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Variables   ‚îÇ  7. Carrega env vars
    ‚îÇ    Setup     ‚îÇ  8. Inicializa variables
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  9. Processa Faker/JS
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Step-by-Step ‚îÇ  10. Executa cada step
    ‚îÇ  Execution   ‚îÇ  11. Interpola vari√°veis
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  12. HTTP request
           ‚îÇ
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ              ‚ñº
           ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ       ‚îÇ  Assertions  ‚îÇ  13. Valida status
           ‚îÇ       ‚îÇ  Validation  ‚îÇ  14. Valida body
           ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  15. Valida headers
           ‚îÇ              ‚îÇ
           ‚îÇ              ‚ñº
           ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ       ‚îÇ   Capture    ‚îÇ  16. Extrai dados (JMESPath)
           ‚îÇ       ‚îÇ   & Export   ‚îÇ  17. Armazena vari√°veis
           ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  18. Exporta globais
           ‚îÇ              ‚îÇ
           ‚îÇ              ‚ñº
           ‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚îÇ       ‚îÇ  Scenarios   ‚îÇ  19. Avalia condi√ß√µes
           ‚îÇ       ‚îÇ  Evaluation  ‚îÇ  20. Executa then/else
           ‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Reporting  ‚îÇ  21. Gera resultados JSON
    ‚îÇ  Generation  ‚îÇ  22. Cria relat√≥rio HTML
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  23. Exibe sum√°rio
```

### 19.2 Fluxo de Vari√°veis

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               ESCOPO E PRECED√äNCIA DE VARI√ÅVEIS                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Preced√™ncia (do maior para o menor):
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

1. ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚Üê MAIOR PRIORIDADE
   ‚îÇ   Runtime Variables     ‚îÇ
   ‚îÇ   (step atual)          ‚îÇ
   ‚îÇ   ‚Ä¢ capture: {...}      ‚îÇ
   ‚îÇ   ‚Ä¢ computed: {...}     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

2. ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  Iteration Variables    ‚îÇ
   ‚îÇ  (durante loop)         ‚îÇ
   ‚îÇ  ‚Ä¢ as: "item"           ‚îÇ
   ‚îÇ  ‚Ä¢ _iteration.index     ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

3. ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   Suite Variables       ‚îÇ
   ‚îÇ   (locais)              ‚îÇ
   ‚îÇ   variables:            ‚îÇ
   ‚îÇ     user_id: 123        ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

4. ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ  Dependency Variables   ‚îÇ
   ‚îÇ  (de depends)           ‚îÇ
   ‚îÇ  {{suite-id.var}}       ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

5. ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ   Global Variables      ‚îÇ
   ‚îÇ   (exports)             ‚îÇ
   ‚îÇ   {{suite-id.var}}      ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

6. ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚Üê MENOR PRIORIDADE
   ‚îÇ  Environment Variables  ‚îÇ
   ‚îÇ  (sistema)              ‚îÇ
   ‚îÇ  {{$env.VAR}}           ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Fluxo de Dados:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

Suite A                    Suite B
  ‚Üì                          ‚Üì
variables:            depends: [Suite A]
  local_var: 1              ‚Üì
  ‚Üì                    {{suite-a.exported}}
exports: [exported]         ‚Üì
  ‚Üì                    variables:
capture:                    uses_export: true
  api_result: "..."         ‚Üì
  ‚Üì                    steps: [...]
{{api_result}}
```

### 19.3 Interpola√ß√£o de Vari√°veis - Processo

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            PROCESSO DE INTERPOLA√á√ÉO {{variable}}                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Input String:
"Hello {{user.name}}, your ID is {{user_id}}"
       ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Detec√ß√£o         ‚îÇ  Regex: /\{\{([^}]+)\}\}/g
‚îÇ     de Padr√µes       ‚îÇ  Encontra: ["{{user.name}}", "{{user_id}}"]
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. Classifica√ß√£o    ‚îÇ  user.name ‚Üí Objeto aninhado
‚îÇ     de Tipo          ‚îÇ  user_id   ‚Üí Vari√°vel simples
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚ñº                      ‚ñº                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Vari√°vel     ‚îÇ   ‚îÇ  Ambiente    ‚îÇ    ‚îÇ   Faker.js   ‚îÇ
‚îÇ Simples      ‚îÇ   ‚îÇ  $env.VAR    ‚îÇ    ‚îÇ $faker.x.y   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                  ‚îÇ                    ‚îÇ
       ‚ñº                  ‚ñº                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Cross-Suite  ‚îÇ   ‚îÇ  JavaScript  ‚îÇ    ‚îÇ   JMESPath   ‚îÇ
‚îÇ suite.var    ‚îÇ   ‚îÇ  $js:expr    ‚îÇ    ‚îÇ  (capture)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ                  ‚îÇ                    ‚îÇ
       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  3. Resolu√ß√£o       ‚îÇ
              ‚îÇ     de Valor        ‚îÇ
              ‚îÇ  ‚Ä¢ Busca em escopo  ‚îÇ
              ‚îÇ  ‚Ä¢ Executa fun√ß√£o   ‚îÇ
              ‚îÇ  ‚Ä¢ Avalia express√£o ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  4. Substitui√ß√£o    ‚îÇ
              ‚îÇ     no String       ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
Output String:
"Hello John Doe, your ID is 12345"
```

### 19.4 Fluxo de Cen√°rios Condicionais

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CEN√ÅRIOS CONDICIONAIS                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Step Executado
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ HTTP Response   ‚îÇ
‚îÇ {status: 200,   ‚îÇ
‚îÇ  body: {...}}   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Cen√°rio 1: Success Path            ‚îÇ
‚îÇ  condition: "status_code == `200`"  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ Avalia ‚Üí TRUE ‚îÄ‚îÄ‚îê
         ‚îÇ                   ‚ñº
         ‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ           ‚îÇ  then:        ‚îÇ
         ‚îÇ           ‚îÇ  ‚Ä¢ assert     ‚îÇ
         ‚îÇ           ‚îÇ  ‚Ä¢ capture    ‚îÇ
         ‚îÇ           ‚îÇ  ‚Ä¢ variables  ‚îÇ
         ‚îÇ           ‚îÇ  ‚Ä¢ steps[]    ‚îÇ
         ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îî‚îÄ‚îÄ Avalia ‚Üí FALSE
                     ‚îÇ
                     ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Cen√°rio 2: Error Path              ‚îÇ
         ‚îÇ  condition: "status_code >= `400`"  ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚îú‚îÄ‚îÄ Avalia ‚Üí TRUE ‚îÄ‚îÄ‚îê
                  ‚îÇ                   ‚ñº
                  ‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ           ‚îÇ  then:        ‚îÇ
                  ‚îÇ           ‚îÇ  ‚Ä¢ assert     ‚îÇ
                  ‚îÇ           ‚îÇ  ‚Ä¢ variables  ‚îÇ
                  ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ                   ‚îÇ
                  ‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ           ‚îÇ  else:        ‚îÇ
                  ‚îÇ           ‚îÇ  (opcional)   ‚îÇ
                  ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚îî‚îÄ‚îÄ Avalia ‚Üí FALSE
                              ‚îÇ
                              ‚ñº
                  Pr√≥ximo Step ou Fim
```

### 19.5 Itera√ß√£o - Fluxo

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      ITERA√á√ÉO (LOOP)                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  iterate:       ‚îÇ
‚îÇ    over: arr    ‚îÇ  Array: [item1, item2, item3]
‚îÇ    as: "item"   ‚îÇ  ou
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  Range: "1..5"
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Iteration Context Setup                ‚îÇ
‚îÇ  ‚Ä¢ index = 0                            ‚îÇ
‚îÇ  ‚Ä¢ isFirst = true                       ‚îÇ
‚îÇ  ‚Ä¢ isLast = false                       ‚îÇ
‚îÇ  ‚Ä¢ variableName = "item"                ‚îÇ
‚îÇ  ‚Ä¢ value = <current>                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ñº‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë  Loop Iteration N                       ‚ïë
    ‚ïë                                         ‚ïë
    ‚ïë  Variables Available:                   ‚ïë
    ‚ïë  ‚Ä¢ {{item}} = current value             ‚ïë
    ‚ïë  ‚Ä¢ {{_iteration.index}} = N             ‚ïë
    ‚ïë  ‚Ä¢ {{_iteration.isFirst}} = boolean     ‚ïë
    ‚ïë  ‚Ä¢ {{_iteration.isLast}} = boolean      ‚ïë
    ‚ïë                                         ‚ïë
    ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚ïë
    ‚ïë  ‚îÇ  1. Interpola vari√°veis     ‚îÇ       ‚ïë
    ‚ïë  ‚îÇ     com contexto atual      ‚îÇ       ‚ïë
    ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚ïë
    ‚ïë             ‚ñº                           ‚ïë
    ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚ïë
    ‚ïë  ‚îÇ  2. Executa Request         ‚îÇ       ‚ïë
    ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚ïë
    ‚ïë             ‚ñº                           ‚ïë
    ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚ïë
    ‚ïë  ‚îÇ  3. Assertions              ‚îÇ       ‚ïë
    ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚ïë
    ‚ïë             ‚ñº                           ‚ïë
    ‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚ïë
    ‚ïë  ‚îÇ  4. Capture                 ‚îÇ       ‚ïë
    ‚ïë  ‚îÇ     "result_{{index}}"      ‚îÇ       ‚ïë
    ‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ Mais itens? ‚Üí Sim ‚îÄ‚îÄ‚îê
         ‚îÇ                        ‚îÇ
         ‚îÇ                        ‚îî‚îÄ‚Üí Loop++
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ N√£o mais itens
              ‚îÇ
              ‚ñº
         Pr√≥ximo Step
```

### 19.6 Dependency Resolution

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                  RESOLU√á√ÉO DE DEPEND√äNCIAS                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Suites Descobertas:
  ‚Ä¢ suite-a.yaml
  ‚Ä¢ suite-b.yaml
  ‚Ä¢ suite-c.yaml
  ‚Ä¢ suite-d.yaml

Depend√™ncias Declaradas:
  suite-b ‚Üí depends: [suite-a]
  suite-c ‚Üí depends: [suite-a, suite-b]
  suite-d ‚Üí depends: [suite-c]

         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ   DAG Builder   ‚îÇ  (Directed Acyclic Graph)
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ Cycle Detection ‚îÇ  Verifica loops
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚îú‚îÄ‚îÄ‚îÄ Ciclo? ‚Üí Sim ‚Üí ‚ùå ERROR
                  ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ N√£o
                       ‚îÇ
                       ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ Topological Sort    ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚ñº

Ordem de Execu√ß√£o:

Level 0:  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ  suite-a  ‚îÇ  (sem depend√™ncias)
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
Level 1:  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ  suite-b  ‚îÇ  (depende de suite-a)
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
Level 2:  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ  suite-c  ‚îÇ  (depende de suite-a + suite-b)
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
Level 3:  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
          ‚îÇ  suite-d  ‚îÇ  (depende de suite-c)
          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Cache Strategy:
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ suite-a executa ‚Üí exports cached        ‚îÇ
‚îÇ    ‚Üì                                    ‚îÇ
‚îÇ suite-b usa cache ‚Üí n√£o reexecuta       ‚îÇ
‚îÇ    ‚Üì                                    ‚îÇ
‚îÇ suite-c usa cache ‚Üí n√£o reexecuta       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 19.7 Step Call Cross-Suite

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    STEP CALL CROSS-SUITE                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Suite Caller (main.yaml)
     ‚îÇ
     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Step com call:                     ‚îÇ
‚îÇ    call:                            ‚îÇ
‚îÇ      test: "./auth/login.yaml"      ‚îÇ
‚îÇ      step: "login-step"             ‚îÇ
‚îÇ      variables:                     ‚îÇ
‚îÇ        user: "{{test_user}}"        ‚îÇ
‚îÇ      isolate_context: true          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1. Resolve Path                    ‚îÇ
‚îÇ     Relativo ou Absoluto            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2. Load Target Suite               ‚îÇ
‚îÇ     (auth/login.yaml)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3. Find Step by ID                 ‚îÇ
‚îÇ     step_id: "login-step"           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4. Inject Variables                ‚îÇ
‚îÇ     Mescla com contexto             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  5. Execute Step                    ‚îÇ
‚îÇ     ‚Ä¢ Request                       ‚îÇ
‚îÇ     ‚Ä¢ Assertions                    ‚îÇ
‚îÇ     ‚Ä¢ Captures                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ isolate_context: true ‚îÄ‚îÄ‚îê
         ‚îÇ                                ‚ñº
         ‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ                    ‚îÇ  Vari√°veis em          ‚îÇ
         ‚îÇ                    ‚îÇ  namespace:            ‚îÇ
         ‚îÇ                    ‚îÇ  {{step-id.variable}}  ‚îÇ
         ‚îÇ                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ isolate_context: false ‚îÄ‚îê
                                          ‚ñº
                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                              ‚îÇ  Vari√°veis mesclam    ‚îÇ
                              ‚îÇ  diretamente no       ‚îÇ
                              ‚îÇ  escopo do caller     ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
Continua execu√ß√£o em Suite Caller
```

### 19.8 Retry Logic

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      RETRY MECHANISM                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Step com Retry:
  metadata:
    retry:
      max_attempts: 3
      delay_ms: 1000

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Attempt 1      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ ‚úÖ Success ‚Üí Continue
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ ‚ùå Failure
              ‚îÇ
              ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Delay      ‚îÇ  Wait 1000ms
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ
                ‚ñº
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Attempt 2      ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
                  ‚îú‚îÄ‚îÄ‚îÄ ‚úÖ Success ‚Üí Continue
                  ‚îÇ
                  ‚îî‚îÄ‚îÄ‚îÄ ‚ùå Failure
                       ‚îÇ
                       ‚ñº
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ  Delay      ‚îÇ  Wait 1000ms
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ
                         ‚ñº
                  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                  ‚îÇ  Attempt 3      ‚îÇ  (max_attempts)
                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚îú‚îÄ‚îÄ‚îÄ ‚úÖ Success ‚Üí Continue
                           ‚îÇ
                           ‚îî‚îÄ‚îÄ‚îÄ ‚ùå Failure
                                ‚îÇ
                                ‚ñº
                           ‚ùå FINAL ERROR
                           (max attempts reached)

Retry aplic√°vel em:
  ‚Ä¢ Request HTTP (timeout, 5xx errors)
  ‚Ä¢ Dependencies (falha na execu√ß√£o)
  ‚Ä¢ Step Call (erro no step chamado)
```

---

## 20. Exemplos Pr√°ticos Completos

### 20.1 Autentica√ß√£o B√°sica

```yaml
node_id: "auth-basic"
suite_name: "Basic Authentication"
base_url: "{{api_url}}"

variables:
  username: "{{$env.TEST_USERNAME}}"
  password: "{{$env.TEST_PASSWORD}}"

exports: ["auth_token"]

steps:
  - name: "Login"
    request:
      method: POST
      url: "/auth/login"
      body:
        username: "{{username}}"
        password: "{{password}}"
    assert:
      status_code: 200
      body:
        token: {exists: true}
    capture:
      auth_token: "body.token"
```

### 20.2 CRUD Completo

```yaml
node_id: "user-crud"
suite_name: "User CRUD Operations"
base_url: "{{api_url}}"

depends:
  - path: "./auth-basic.yaml"

variables:
  test_user:
    name: "{{$faker.person.fullName}}"
    email: "{{$faker.internet.email}}"

steps:
  # Create
  - name: "Create user"
    request:
      method: POST
      url: "/users"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
      body:
        name: "{{test_user.name}}"
        email: "{{test_user.email}}"
    assert:
      status_code: 201
      body:
        id: {exists: true}
    capture:
      user_id: "body.id"

  # Read
  - name: "Get user"
    request:
      method: GET
      url: "/users/{{user_id}}"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
    assert:
      status_code: 200
      body:
        id: {equals: "{{user_id}}"}
        email: {equals: "{{test_user.email}}"}

  # Update
  - name: "Update user"
    request:
      method: PUT
      url: "/users/{{user_id}}"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
      body:
        name: "Updated Name"
    assert:
      status_code: 200

  # Delete
  - name: "Delete user"
    request:
      method: DELETE
      url: "/users/{{user_id}}"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
    assert:
      status_code: 204
```

### 20.3 Data-Driven Testing

```yaml
node_id: "validation-test"
suite_name: "Email Validation Tests"
base_url: "{{api_url}}"

variables:
  test_cases:
    - {email: "valid@example.com", expected: 200}
    - {email: "invalid", expected: 400}
    - {email: "", expected: 400}
    - {email: "no-at-sign.com", expected: 400}

steps:
  - name: "Test: {{test.email}}"
    iterate:
      over: "{{test_cases}}"
      as: "test"
    request:
      method: POST
      url: "/validate-email"
      body:
        email: "{{test.email}}"
    assert:
      status_code: "{{test.expected}}"
```

---

## 21. Guia de Troubleshooting

### Problemas Comuns

| Problema | Solu√ß√£o |
|----------|---------|
| `Variable {{var}} not found` | Verificar defini√ß√£o ou capture anterior |
| `JMESPath evaluation failed` | Testar em https://jmespath.org/ |
| `URL resolution error` | Verificar `base_url` e tipo de URL |
| `Assertion failed` | Adicionar `scenarios` para m√∫ltiplos casos |
| `Timeout exceeded` | Aumentar `timeout` |
| `Circular dependency` | Revisar cadeia de `depends` |
| `Input timeout` | Definir `ci_default` e `timeout_seconds` |
| `Iteration failed` | Validar array n√£o est√° vazio |

### Debug Tips

```yaml
# Capturar tudo para debug
capture:
  debug_full: "@"
  debug_status: "status"
  debug_headers: "headers"
  debug_body: "body"

# Assertions verbosas
assert:
  custom:
    - name: "Debug"
      condition: "body"
      message: "Response: {{body}}"
```

### CLI √öteis

```bash
# Dry run
npx flow-test-engine --dry-run tests/suite.yaml

# Verbose
npx flow-test-engine --verbose tests/suite.yaml

# Listar testes
npx flow-test-engine --list
```

---

## 22. Limita√ß√µes Conhecidas
| `Assertion failed` | Adicionar `scenarios` para m√∫ltiplos casos |
| `Timeout exceeded` | Aumentar `timeout` |
| `Circular dependency` | Revisar cadeia de `depends` |
| `Input timeout` | Definir `ci_default` e `timeout_seconds` |
| `Iteration failed` | Validar array n√£o est√° vazio |

### Debug Tips

```yaml
# Capturar tudo para debug
capture:
  debug_full: "@"
  debug_status: "status"
  debug_headers: "headers"
  debug_body: "body"

# Assertions verbosas
assert:
  custom:
    - name: "Debug"
      condition: "body"
      message: "Response: {{body}}"
```

### CLI √öteis

```bash
# Dry run
npx flow-test-engine --dry-run tests/suite.yaml

# Verbose
npx flow-test-engine --verbose tests/suite.yaml

# Listar testes
npx flow-test-engine --list
```

---

## 22. Limita√ß√µes Conhecidas

### T√©cnicas

| Limita√ß√£o | Workaround |
|-----------|------------|
| Input s√≥ em sequential | Usar `execution_mode: sequential` |
| Vari√°vel de itera√ß√£o tem escopo limitado | Capturar antes do fim |
| Cross-suite requer execu√ß√£o pr√©via | Usar `depends` |
| Timeout n√£o √© por assertion | Usar no step/request |

### Boas Pr√°ticas

‚úÖ **DO:**
- Usar `node_id` √∫nicos
- Definir `ci_default` para inputs
- Capturar vari√°veis essenciais
- Validar com m√∫ltiplas assertions

‚ùå **DON'T:**
- Parallel com input
- Depend√™ncias circulares
- Timeouts muito curtos em CI
- Ignorar falhas sem motivo

---

## üìö Recursos Adicionais

- **Reposit√≥rio:** https://github.com/marcuspmd/flow-test
- **Exemplos:** `/tests` directory
- **Issues:** GitHub Issues
- **Wiki:** GitHub Wiki

---

**Flow Test Engine v1.0 - Documenta√ß√£o Oficial**
*Copyright ¬© 2025 - Todos os direitos reservados*
