# Flow Test Engine - YAML API Reference

> **VersÃ£o:** 1.0
> **Ãšltima AtualizaÃ§Ã£o:** 10 de outubro de 2025
> **Status:** DocumentaÃ§Ã£o Completa âœ…

## ğŸ“š Ãndice NavegÃ¡vel

### ğŸ—ï¸ Estrutura e ConfiguraÃ§Ã£o
- [1. TestSuite (Estrutura Base)](#1-testsuite-estrutura-base)
- [2. TestStep (Propriedades dos Steps)](#2-teststep-propriedades-dos-steps)
- [16. Execution Modes](#16-execution-modes)
- [17. Priority Levels](#17-priority-levels)
- [18. Tags](#18-tags)

### ğŸ”„ VariÃ¡veis e InterpolaÃ§Ã£o
- [3. Sistema de InterpolaÃ§Ã£o](#3-sistema-de-interpolaÃ§Ã£o)
  - [3.1 Sintaxe BÃ¡sica](#31-sintaxe-e-fontes)
  - [3.2 Faker.js](#32-fakerjs---categorias-principais)
  - [3.3 JavaScript Expressions](#33-javascript-expressions)
- [14. Escopo de VariÃ¡veis](#14-escopo-de-variÃ¡veis)

### âœ… ValidaÃ§Ã£o e Assertions
- [4. Assertions (ValidaÃ§Ãµes)](#4-assertions-validaÃ§Ãµes)
  - [4.1 Estrutura](#41-estrutura-de-assertions)
  - [4.2 Operadores](#42-operadores-de-asserÃ§Ã£o-assertionchecks)
  - [4.3 Tipos Suportados](#43-tipos-suportados)
  - [4.4 ValidaÃ§Ã£o de Length](#44-validaÃ§Ã£o-de-length)
  - [4.5 Custom Assertions](#45-custom-assertions)
- [5. ExtraÃ§Ã£o de Dados (JMESPath)](#5-extraÃ§Ã£o-de-dados---capture-jmespath)

### ğŸ’¬ Input e InteraÃ§Ã£o
- [6. Input Interativo](#6-input-interativo-inputconfig)
  - [6.1 Propriedades](#61-propriedades-base)
  - [6.2 Tipos de Input](#62-tipos-de-input)
  - [6.3 Options](#63-options-para-select)
  - [6.4 ValidaÃ§Ã£o](#64-input-validation)

### ğŸ” Controle de Fluxo
- [7. IteraÃ§Ã£o](#7-iteraÃ§Ã£o-iterationconfig)
  - [7.1 Array Iteration](#71-array-iteration)
  - [7.2 Range Iteration](#72-range-iteration)
- [8. CenÃ¡rios Condicionais](#8-cenÃ¡rios-condicionais-conditionalscenario)
- [9. Step Call Cross-Suite](#9-step-call-cross-suite-stepcallconfig)

### âš™ï¸ ConfiguraÃ§Ãµes AvanÃ§adas
- [10. Tipos de Dados](#10-tipos-de-dados-e-valores-especiais)
- [11. Retry](#11-configuraÃ§Ã£o-de-retry)
- [12. Timeouts](#12-timeouts)
- [13. URLs](#13-resoluÃ§Ã£o-de-urls)
- [15. Response Structure](#15-response-object-structure)

### ï¿½ Diagramas e VisualizaÃ§Ãµes
- [19. Diagramas e Fluxos](#19-diagramas-e-fluxos-de-execuÃ§Ã£o)
  - [19.1 Fluxo de ExecuÃ§Ã£o Geral](#191-fluxo-de-execuÃ§Ã£o-geral)
  - [19.2 Fluxo de VariÃ¡veis](#192-fluxo-de-variÃ¡veis)
  - [19.3 InterpolaÃ§Ã£o](#193-interpolaÃ§Ã£o-de-variÃ¡veis---processo)
  - [19.4 CenÃ¡rios Condicionais](#194-fluxo-de-cenÃ¡rios-condicionais)
  - [19.5 IteraÃ§Ã£o](#195-iteraÃ§Ã£o---fluxo)
  - [19.6 Dependency Resolution](#196-dependency-resolution)
  - [19.7 Step Call](#197-step-call-cross-suite)
  - [19.8 Retry Logic](#198-retry-logic)

### ï¿½ğŸ“– Exemplos e Ajuda
- [20. Exemplos PrÃ¡ticos](#20-exemplos-prÃ¡ticos-completos)
- [21. Troubleshooting](#21-guia-de-troubleshooting)
- [22. LimitaÃ§Ãµes](#22-limitaÃ§Ãµes-conhecidas)

---

## ğŸš€ Quick Start

### Estrutura MÃ­nima

```yaml
node_id: "meu-teste"
suite_name: "Meu Primeiro Teste"
base_url: "https://api.example.com"

steps:
  - name: "Fazer requisiÃ§Ã£o"
    request:
      method: GET
      url: "/endpoint"
    assert:
      status_code: 200
```

### Exemplo Completo

```yaml
node_id: "user-management"
suite_name: "User Management Tests"
base_url: "{{api_base_url}}"
execution_mode: "sequential"

metadata:
  priority: "high"
  tags: ["users", "crud"]
  timeout: 30000

variables:
  test_user_email: "{{$faker.internet.email}}"

exports: ["created_user_id"]

depends:
  - path: "./auth-setup.yaml"
    required: true

steps:
  - name: "Create user"
    request:
      method: POST
      url: "/users"
      headers:
        Authorization: "Bearer {{auth-setup.token}}"
      body:
        email: "{{test_user_email}}"
        name: "{{$faker.person.fullName}}"
    assert:
      status_code: 201
      body:
        id: {exists: true}
        email: {equals: "{{test_user_email}}"}
    capture:
      created_user_id: "body.id"
```

---

## 1. TestSuite (Estrutura Base)

### Propriedades Principais

| Propriedade | Tipo | ObrigatÃ³rio | PadrÃ£o | DescriÃ§Ã£o |
|-------------|------|-------------|--------|-----------|
| `node_id` | `string` | âœ… | - | Identificador Ãºnico (kebab-case) |
| `suite_name` | `string` | âœ… | - | Nome descritivo da suÃ­te |
| `description` | `string` | âŒ | - | DescriÃ§Ã£o detalhada |
| `base_url` | `string` | âŒ | - | URL base para requests relativos |
| `execution_mode` | `"sequential" \| "parallel"` | âŒ | `"sequential"` | Modo de execuÃ§Ã£o |
| `variables` | `Record<string, any>` | âŒ | `{}` | VariÃ¡veis locais |
| `exports` | `string[]` | âŒ | `[]` | VariÃ¡veis para exportar |
| `exports_optional` | `string[]` | âŒ | `[]` | Exports opcionais |
| `depends` | `FlowDependency[]` | âŒ | `[]` | DependÃªncias |
| `steps` | `TestStep[]` | âœ… | - | Passos de teste |
| `metadata` | `SuiteMetadata` | âŒ | - | Metadados |

### Suite Metadata

```yaml
metadata:
  priority: "critical"        # critical|high|medium|low
  tags: ["smoke", "auth"]     # CategorizaÃ§Ã£o
  timeout: 30000              # Timeout geral em ms
  estimated_duration_ms: 5000 # DuraÃ§Ã£o estimada
  requires_user_input: false  # Flag para inputs
```

### Flow Dependency

```yaml
depends:
  # Caminho relativo (padrÃ£o)
  - path: "./auth/login.yaml"
    required: true
    cache: 300  # TTL em segundos

  # Caminho absoluto (a partir de test_directory)
  - path: "common/setup.yaml"
    path_type: "absolute"
    required: true

  # Por node_id
  - node_id: "auth-setup"
    cache: true

  # Com condiÃ§Ã£o
  - path: "./optional.yaml"
    condition: "environment == 'dev'"

  # Com variÃ¡veis e retry
  - path: "./database-setup.yaml"
    variables:
      db_name: "test_db"
    retry:
      max_attempts: 3
      delay_ms: 1000
```

---

## 2. TestStep (Propriedades dos Steps)

### Propriedades Principais

| Propriedade | Tipo | ObrigatÃ³rio | DescriÃ§Ã£o |
|-------------|------|-------------|-----------|
| `name` | `string` | âœ… | Nome do passo |
| `step_id` | `string` | âŒ | ID Ãºnico do passo |
| `request` | `RequestDetails` | Condicional* | ConfiguraÃ§Ã£o HTTP |
| `assert` | `Assertions` | âŒ | ValidaÃ§Ãµes |
| `capture` | `Record<string, string>` | âŒ | ExtraÃ§Ãµes JMESPath |
| `input` | `InputConfig \| InputConfig[]` | âŒ | Input interativo |
| `call` | `StepCallConfig` | âŒ | Chamada cross-suite |
| `iterate` | `IterationConfig` | âŒ | Loop |
| `scenarios` | `ConditionalScenario[]` | âŒ | Condicionais |
| `continue_on_failure` | `boolean` | âŒ | Continuar em falha |
| `metadata` | `TestStepMetadata` | âŒ | Metadados |

> *`request` Ã© opcional apenas se houver `input` ou `call`

### Request Details

```yaml
request:
  method: POST              # GET|POST|PUT|DELETE|PATCH|HEAD|OPTIONS
  url: "/api/users"         # Absoluta ou relativa
  headers:
    Content-Type: "application/json"
    Authorization: "Bearer {{token}}"
  body:
    name: "John Doe"
    email: "john@example.com"
  params:                   # Query string
    page: 1
    limit: 10
  timeout: 30000            # ms
```

### Step Metadata

```yaml
metadata:
  priority: "high"
  tags: ["critical"]
  timeout: 10000
  retry:
    max_attempts: 3
    delay_ms: 1000
  depends_on: ["step-1", "step-2"]
  description: "Creates user account"
  skip: "{{environment}} === 'prod'"  # CondiÃ§Ã£o para pular
```

---

## 3. Sistema de InterpolaÃ§Ã£o

### 3.1 Sintaxe e Fontes

| Tipo | Sintaxe | Exemplo | Resultado |
|------|---------|---------|-----------|
| **BÃ¡sica** | `{{var}}` | `{{user_id}}` | VariÃ¡vel local/capturada |
| **Aninhada** | `{{obj.field}}` | `{{user.profile.name}}` | Acesso profundo |
| **Array** | `{{arr[i]}}` | `{{items[0].id}}` | Por Ã­ndice |
| **Cross-suite** | `{{suite-id.var}}` | `{{auth.token}}` | Entre suites |
| **Ambiente** | `{{$env.VAR}}` | `{{$env.API_KEY}}` | LÃª `FLOW_TEST_API_KEY` |
| **Faker** | `{{$faker.x.y}}` | `{{$faker.internet.email}}` | Dados fake |
| **JavaScript** | `{{$js:expr}}` | `{{$js:Date.now()}}` | ExpressÃ£o JS |

### 3.2 Faker.js - Categorias Principais

| Categoria | Exemplos | Uso |
|-----------|----------|-----|
| `person` | `firstName`, `lastName`, `fullName` | Nomes |
| `internet` | `email`, `url`, `userName`, `password` | Web |
| `phone` | `number`, `imei` | Telefones |
| `location` | `city`, `country`, `streetAddress` | Geografia |
| `commerce` | `productName`, `price`, `department` | ComÃ©rcio |
| `company` | `name`, `catchPhrase`, `bs` | Empresas |
| `string` | `uuid`, `alphanumeric`, `numeric` | Strings |
| `number` | `int`, `float`, `binary` | NÃºmeros |
| `date` | `past`, `future`, `recent`, `soon` | Datas |
| `lorem` | `word`, `words`, `sentence`, `paragraph` | Texto |

```yaml
variables:
  user_email: "{{$faker.internet.email}}"           # test@example.com
  user_name: "{{$faker.person.fullName}}"           # John Doe
  user_phone: "{{$faker.phone.number}}"             # +1234567890
  product_price: "{{$faker.commerce.price}}"        # 49.99
  uuid: "{{$faker.string.uuid}}"                    # 123e4567-e89b...
  random_int: "{{$faker.number.int({min: 1, max: 100})}}"  # 42
```

### 3.3 JavaScript Expressions

```yaml
computed:
  timestamp: "{{$js:Date.now()}}"                   # 1704110400000
  iso_date: "{{$js:new Date().toISOString()}}"      # 2024-01-01T12:00:00.000Z
  random: "{{$js:Math.random()}}"                   # 0.123456789
  calculation: "{{$js:{{price}} * {{quantity}}}}"   # Resultado do cÃ¡lculo
  rounded: "{{$js:Math.round({{value}}\)}}}"        # Valor arredondado
  base64: "{{$js:Buffer.from('text').toString('base64')}}"  # dGV4dA==
  json_parse: "{{$js:JSON.parse('{{json_string}}')}}"       # Objeto parseado
```

---

## 4. Assertions (ValidaÃ§Ãµes)

### 4.1 Estrutura de Assertions

```yaml
assert:
  # Shorthand para status
  status_code: 200

  # ValidaÃ§Ãµes do body
  body:
    user.id: {exists: true, type: "number"}
    user.email: {regex: "^[\\w.-]+@[\\w.-]+\\.\\w+$"}
    items: {length: {greater_than: 0}}

  # Headers
  headers:
    content-type: {contains: "json"}

  # Response time
  response_time_ms:
    less_than: 2000
    greater_than: 10

  # Custom
  custom:
    - name: "Valid ID"
      condition: "body.id > 0"
      message: "ID must be positive"
```

### 4.2 Operadores de AsserÃ§Ã£o (AssertionChecks)

| Operador | Tipo | DescriÃ§Ã£o | Exemplo |
|----------|------|-----------|---------|
| `equals` | `any` | Igualdade exata | `{equals: 200}` |
| `not_equals` | `any` | Diferente de | `{not_equals: null}` |
| `contains` | `any` | ContÃ©m valor | `{contains: "success"}` |
| `not_contains` | `any` | NÃ£o contÃ©m | `{not_contains: "error"}` |
| `greater_than` | `number` | Maior que | `{greater_than: 0}` |
| `less_than` | `number` | Menor que | `{less_than: 1000}` |
| `greater_than_or_equal` | `number` | â‰¥ | `{greater_than_or_equal: 1}` |
| `less_than_or_equal` | `number` | â‰¤ | `{less_than_or_equal: 100}` |
| `regex` | `string` | PadrÃ£o regex | `{regex: "^[a-z]+$"}` |
| `pattern` | `string` | Alias de regex | `{pattern: "\\d{3}"}` |
| `exists` | `boolean` | Campo existe | `{exists: true}` |
| `not_exists` | `boolean` | Campo nÃ£o existe | `{exists: false}` |
| `type` | `string` | Tipo do valor | `{type: "string"}` |
| `length` | `object` | Tamanho | `{length: {equals: 5}}` |
| `minLength` | `number` | Tamanho mÃ­n. | `{minLength: 3}` |
| `notEmpty` | `boolean` | NÃ£o vazio | `{notEmpty: true}` |
| `in` | `any[]` | EstÃ¡ na lista | `{in: ["active", "pending"]}` |
| `not_in` | `any[]` | NÃ£o estÃ¡ na lista | `{not_in: ["deleted"]}` |

### 4.3 Tipos Suportados

- `"string"` - Texto
- `"number"` - NÃºmero (int/float)
- `"boolean"` - Booleano
- `"array"` - Lista
- `"object"` - Objeto
- `"null"` - Nulo

### 4.4 ValidaÃ§Ã£o de Length

```yaml
body:
  items:
    length:
      equals: 10              # Exatamente 10
      greater_than: 0         # Mais de 0
      less_than: 100          # Menos de 100
      greater_than_or_equal: 5
      less_than_or_equal: 50
```

### 4.5 Custom Assertions

```yaml
custom:
  - name: "Valid user ID format"
    condition: "body.user.id && typeof body.user.id === 'number'"
    message: "User ID must be a number"

  - name: "Email matches username"
    condition: "body.email.startsWith(body.username)"
    message: "Email should start with username"
```

---

## 5. ExtraÃ§Ã£o de Dados - Capture (JMESPath)

### Sintaxe BÃ¡sica

| PadrÃ£o | DescriÃ§Ã£o | Exemplo | Resultado |
|--------|-----------|---------|-----------|
| Campo simples | Acesso direto | `body.token` | Valor do campo |
| Aninhado | NavegaÃ§Ã£o | `body.user.profile.name` | Valor profundo |
| Array Ã­ndice | Posicional | `body.items[0]` | Primeiro item |
| Array negativo | Reverso | `body.items[-1]` | Ãšltimo item |
| ProjeÃ§Ã£o | Mapear | `body.data[*].id` | Array de IDs |
| Completo | Tudo | `@` | Resposta inteira |
| Status | HTTP code | `status` | 200, 404, etc. |
| Headers | CabeÃ§alhos | `headers.Content-Type` | Valor do header |

### OperaÃ§Ãµes AvanÃ§adas

```yaml
capture:
  # Filtros
  active_users: "users[?status=='active']"
  expensive_items: "items[?price > `100`]"

  # ProjeÃ§Ãµes customizadas
  user_list: "users[*].{id: id, name: name, email: email}"

  # FunÃ§Ãµes
  total_count: "length(items)"
  max_price: "max(products[*].price)"
  min_price: "min(products[*].price)"

  # OrdenaÃ§Ã£o
  sorted_items: "sort_by(items, &created_at)"

  # Flatten
  all_tags: "posts[].tags[]"

  # Pipes
  first_five: "items | [0:5]"

  # Contains
  has_admin: "contains(roles, 'admin')"
```

---

## 6. Input Interativo (InputConfig)

### 6.1 Propriedades Base

```yaml
input:
  prompt: "Enter your API key:"       # OBRIGATÃ“RIO
  variable: "api_key"                  # OBRIGATÃ“RIO
  type: "password"                     # OBRIGATÃ“RIO
  description: "API key for auth"
  default: "default_value"
  placeholder: "sk-..."
  required: true
  style: "boxed"                       # simple|boxed|highlighted
  timeout_seconds: 60
  condition: "{{status}} == 200"
  ci_default: "{{$env.CI_API_KEY}}"
  validation: {...}
  dynamic: {...}
  options: [...]                       # Para select/multiselect
```

### 6.2 Tipos de Input

| Tipo | DescriÃ§Ã£o | Use Case |
|------|-----------|----------|
| `text` | Texto simples | Nomes, IDs |
| `password` | Mascarado | Senhas, tokens |
| `number` | NumÃ©rico | Quantidades |
| `email` | Email validado | EndereÃ§os |
| `url` | URL validada | Links |
| `select` | SeleÃ§Ã£o Ãºnica | Escolher opÃ§Ã£o |
| `multiselect` | MÃºltipla seleÃ§Ã£o | VÃ¡rias opÃ§Ãµes |
| `confirm` | Sim/NÃ£o | ConfirmaÃ§Ãµes |
| `multiline` | Multilinha | JSON, descriÃ§Ãµes |

### 6.3 Options para Select

```yaml
# EstÃ¡tico
options:
  - {value: "dev", label: "Development"}
  - {value: "prod", label: "Production"}

# De variÃ¡vel
options: "{{environments}}"
value_path: "id"
label_path: "name"

# JMESPath
options: "{{users[*].{value: id, label: name}}}"
```

### 6.4 Input Validation

```yaml
validation:
  min_length: 5
  max_length: 100
  pattern: "^[a-zA-Z0-9]+$"
  min: 0
  max: 100
  custom_validation: "value.length > 3"
  expressions:
    - name: "Valid format"
      expression: "value.startsWith('sk-')"
      message: "Must start with sk-"
      severity: "error"      # error|warning
```

---

## 7. IteraÃ§Ã£o (IterationConfig)

### 7.1 Array Iteration

```yaml
- name: "Process {{user.name}}"
  iterate:
    over: "{{test_users}}"    # Array ou expressÃ£o
    as: "user"                # Nome da variÃ¡vel
  request:
    method: POST
    url: "/users"
    body:
      name: "{{user.name}}"
      email: "{{user.email}}"
```

### 7.2 Range Iteration

```yaml
- name: "Test page {{page}}"
  iterate:
    range: "1..10"            # start..end (inclusive)
    as: "page"
  request:
    method: GET
    url: "/items?page={{page}}"
```

### Iteration Context

Durante a iteraÃ§Ã£o, estÃ£o disponÃ­veis:
- `{{<as_variable>}}` - Valor atual
- `_iteration.index` - Ãndice (0-based)
- `_iteration.isFirst` - Primeira iteraÃ§Ã£o
- `_iteration.isLast` - Ãšltima iteraÃ§Ã£o

---

## 8. CenÃ¡rios Condicionais (ConditionalScenario)

```yaml
scenarios:
  - name: "Success path"
    condition: "status_code == `200`"  # JMESPath
    then:
      assert:
        body:
          success: {equals: true}
      capture:
        result_id: "body.id"
      variables:
        operation_succeeded: true
      steps:                             # Apenas em 'then'
        - name: "Verify result"
          request:
            method: GET
            url: "/verify/{{result_id}}"

  - name: "Error path"
    condition: "status_code >= `400`"
    then:
      assert:
        body:
          error: {exists: true}
      variables:
        operation_failed: true
    else:
      variables:
        operation_succeeded: true
```

### Operadores em CondiÃ§Ãµes

- `==`, `!=` - Igualdade
- `<`, `<=`, `>`, `>=` - ComparaÃ§Ã£o
- `&&` - E lÃ³gico
- `||` - OU lÃ³gico
- `!` - NegaÃ§Ã£o

> Literais numÃ©ricos: `` `200` ``
> Strings: `'text'`

---

## 9. Step Call Cross-Suite (StepCallConfig)

```yaml
call:
  test: "../auth/login.yaml"          # Caminho do arquivo
  path_type: "relative"                # relative|absolute
  step: "login-step"                   # ID ou nome do step
  variables:                           # Injetar variÃ¡veis
    username: "{{test_user}}"
    password: "{{test_pass}}"
  isolate_context: true                # Namespace de variÃ¡veis
  on_error: "fail"                     # fail|continue|warn
  timeout: 30000
  retry:
    max_attempts: 3
    delay_ms: 1000
```

### Comportamento de Isolamento

| `isolate_context` | Comportamento |
|-------------------|---------------|
| `true` (padrÃ£o) | VariÃ¡veis em `{{step-id.variable}}` |
| `false` | VariÃ¡veis mesclam no escopo pai |

---

## 10. Tipos de Dados e Valores Especiais

### Primitivos

```yaml
variables:
  text: "Hello"              # string
  number: 42                 # number
  decimal: 3.14              # number
  active: true               # boolean
  empty: null                # null
  list: [1, 2, 3]            # array
  object:                    # object
    key: "value"
```

### Response Object

```typescript
{
  status: 200,               // CÃ³digo HTTP
  status_code: 200,          // Alias
  headers: {...},            // Headers da resposta
  body: {...},               // Corpo parseado
  data: {...},               // Alias para body (axios)
  response_time_ms: 123      // Tempo de resposta
}
```

---

## 11. ConfiguraÃ§Ã£o de Retry

```yaml
# No step metadata
metadata:
  retry:
    max_attempts: 3
    delay_ms: 1000

# Em dependency
depends:
  - path: "./setup.yaml"
    retry:
      max_attempts: 2
      delay_ms: 500

# Em call
call:
  test: "./external.yaml"
  step: "api-call"
  retry:
    max_attempts: 5
    delay_ms: 2000
```

---

## 12. Timeouts

| NÃ­vel | Propriedade | Escopo | PadrÃ£o |
|-------|-------------|--------|--------|
| Global | `config.timeout` | Todas requisiÃ§Ãµes | Config |
| Suite | `metadata.timeout` | Suite inteira | Sem limite |
| Step | `metadata.timeout` | Step especÃ­fico | Herda |
| Request | `request.timeout` | HTTP individual | 30000 ms |
| Input | `input.timeout_seconds` | Input interativo | Sem limite |
| Call | `call.timeout` | Cross-suite | Herda |

---

## 13. ResoluÃ§Ã£o de URLs

| URL no Step | Base URL | Resultado |
|-------------|----------|-----------|
| `/api/users` | `https://api.example.com` | `https://api.example.com/api/users` |
| `users` | `https://api.example.com` | `https://api.example.com/users` |
| `https://other.com/api` | Qualquer | `https://other.com/api` |
| `http://localhost:8080` | Qualquer | `http://localhost:8080` |

---

## 14. Escopo de VariÃ¡veis

| Escopo | DefiniÃ§Ã£o | Acesso | PersistÃªncia |
|--------|-----------|--------|--------------|
| **Local** | `variables` | Suite atual | DuraÃ§Ã£o da suite |
| **Runtime** | Capturadas | Steps seguintes | DuraÃ§Ã£o da suite |
| **Global** | `exports` | `{{suite-id.var}}` | Toda execuÃ§Ã£o |
| **Environment** | Sistema | `{{$env.VAR}}` | Permanente |
| **Dynamic** | Input | Conforme config | ConfigurÃ¡vel |

### Ordem de PrecedÃªncia (maior â†’ menor)

1. VariÃ¡veis runtime (step atual)
2. VariÃ¡veis de iteraÃ§Ã£o (`as`)
3. VariÃ¡veis locais
4. VariÃ¡veis de dependencies
5. VariÃ¡veis globais (`exports`)
6. VariÃ¡veis de ambiente

---

## 15. Response Object Structure

```typescript
interface Response {
  status: number;              // 200, 404, etc.
  status_code: number;         // Alias
  headers: Record<string, string>;
  body: any;                   // JSON parseado ou string
  data: any;                   // Alias para body
  response_time_ms: number;    // Tempo de resposta
}
```

---

## 16. Execution Modes

| Mode | DescriÃ§Ã£o | Use Case | RestriÃ§Ãµes |
|------|-----------|----------|------------|
| `sequential` | Ordem sequencial | Com dependÃªncias | Nenhuma |
| `parallel` | SimultÃ¢neo | Independentes | Sem `input` |

---

## 17. Priority Levels

| NÃ­vel | Uso |
|-------|-----|
| `critical` | Smoke tests, core |
| `high` | Funcionalidades importantes |
| `medium` | Regression padrÃ£o |
| `low` | Edge cases |

```bash
npx flow-test-engine --priority critical,high
```

---

## 18. Tags

Exemplos comuns:
- `smoke`, `regression`, `auth`
- `api`, `e2e`, `integration`
- `performance`, `security`

```bash
npx flow-test-engine --tags smoke,auth
```

---

## 19. Diagramas e Fluxos de ExecuÃ§Ã£o

### 19.1 Fluxo de ExecuÃ§Ã£o Geral

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLOW TEST ENGINE                             â”‚
â”‚                     Ciclo de Vida                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Discovery  â”‚  1. Descobre arquivos .yaml
    â”‚   (Config)   â”‚  2. Valida estrutura
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  3. Resolve dependÃªncias
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Dependency   â”‚  4. Ordena por depends
    â”‚  Resolution  â”‚  5. Detecta ciclos
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  6. Valida cache
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Variables   â”‚  7. Carrega env vars
    â”‚    Setup     â”‚  8. Inicializa variables
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  9. Processa Faker/JS
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Step-by-Step â”‚  10. Executa cada step
    â”‚  Execution   â”‚  11. Interpola variÃ¡veis
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  12. HTTP request
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚              â–¼
           â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚       â”‚  Assertions  â”‚  13. Valida status
           â”‚       â”‚  Validation  â”‚  14. Valida body
           â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  15. Valida headers
           â”‚              â”‚
           â”‚              â–¼
           â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚       â”‚   Capture    â”‚  16. Extrai dados (JMESPath)
           â”‚       â”‚   & Export   â”‚  17. Armazena variÃ¡veis
           â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  18. Exporta globais
           â”‚              â”‚
           â”‚              â–¼
           â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚       â”‚  Scenarios   â”‚  19. Avalia condiÃ§Ãµes
           â”‚       â”‚  Evaluation  â”‚  20. Executa then/else
           â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   Reporting  â”‚  21. Gera resultados JSON
    â”‚  Generation  â”‚  22. Cria relatÃ³rio HTML
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  23. Exibe sumÃ¡rio
```

### 19.2 Fluxo de VariÃ¡veis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ESCOPO E PRECEDÃŠNCIA DE VARIÃVEIS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PrecedÃªncia (do maior para o menor):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† MAIOR PRIORIDADE
   â”‚   Runtime Variables     â”‚
   â”‚   (step atual)          â”‚
   â”‚   â€¢ capture: {...}      â”‚
   â”‚   â€¢ computed: {...}     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

2. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Iteration Variables    â”‚
   â”‚  (durante loop)         â”‚
   â”‚  â€¢ as: "item"           â”‚
   â”‚  â€¢ _iteration.index     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Suite Variables       â”‚
   â”‚   (locais)              â”‚
   â”‚   variables:            â”‚
   â”‚     user_id: 123        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

4. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Dependency Variables   â”‚
   â”‚  (de depends)           â”‚
   â”‚  {{suite-id.var}}       â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Global Variables      â”‚
   â”‚   (exports)             â”‚
   â”‚   {{suite-id.var}}      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

6. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† MENOR PRIORIDADE
   â”‚  Environment Variables  â”‚
   â”‚  (sistema)              â”‚
   â”‚  {{$env.VAR}}           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Fluxo de Dados:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Suite A                    Suite B
  â†“                          â†“
variables:            depends: [Suite A]
  local_var: 1              â†“
  â†“                    {{suite-a.exported}}
exports: [exported]         â†“
  â†“                    variables:
capture:                    uses_export: true
  api_result: "..."         â†“
  â†“                    steps: [...]
{{api_result}}
```

### 19.3 InterpolaÃ§Ã£o de VariÃ¡veis - Processo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PROCESSO DE INTERPOLAÃ‡ÃƒO {{variable}}                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Input String:
"Hello {{user.name}}, your ID is {{user_id}}"
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. DetecÃ§Ã£o         â”‚  Regex: /\{\{([^}]+)\}\}/g
â”‚     de PadrÃµes       â”‚  Encontra: ["{{user.name}}", "{{user_id}}"]
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ClassificaÃ§Ã£o    â”‚  user.name â†’ Objeto aninhado
â”‚     de Tipo          â”‚  user_id   â†’ VariÃ¡vel simples
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â–¼                      â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VariÃ¡vel     â”‚   â”‚  Ambiente    â”‚    â”‚   Faker.js   â”‚
â”‚ Simples      â”‚   â”‚  $env.VAR    â”‚    â”‚ $faker.x.y   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                    â”‚
       â–¼                  â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cross-Suite  â”‚   â”‚  JavaScript  â”‚    â”‚   JMESPath   â”‚
â”‚ suite.var    â”‚   â”‚  $js:expr    â”‚    â”‚  (capture)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  3. ResoluÃ§Ã£o       â”‚
              â”‚     de Valor        â”‚
              â”‚  â€¢ Busca em escopo  â”‚
              â”‚  â€¢ Executa funÃ§Ã£o   â”‚
              â”‚  â€¢ Avalia expressÃ£o â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  4. SubstituiÃ§Ã£o    â”‚
              â”‚     no String       â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
Output String:
"Hello John Doe, your ID is 12345"
```

### 19.4 Fluxo de CenÃ¡rios Condicionais

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CENÃRIOS CONDICIONAIS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step Executado
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HTTP Response   â”‚
â”‚ {status: 200,   â”‚
â”‚  body: {...}}   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CenÃ¡rio 1: Success Path            â”‚
â”‚  condition: "status_code == `200`"  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€ Avalia â†’ TRUE â”€â”€â”
         â”‚                   â–¼
         â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚  then:        â”‚
         â”‚           â”‚  â€¢ assert     â”‚
         â”‚           â”‚  â€¢ capture    â”‚
         â”‚           â”‚  â€¢ variables  â”‚
         â”‚           â”‚  â€¢ steps[]    â”‚
         â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€â”€ Avalia â†’ FALSE
                     â”‚
                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  CenÃ¡rio 2: Error Path              â”‚
         â”‚  condition: "status_code >= `400`"  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”œâ”€â”€ Avalia â†’ TRUE â”€â”€â”
                  â”‚                   â–¼
                  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚           â”‚  then:        â”‚
                  â”‚           â”‚  â€¢ assert     â”‚
                  â”‚           â”‚  â€¢ variables  â”‚
                  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                   â”‚
                  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚           â”‚  else:        â”‚
                  â”‚           â”‚  (opcional)   â”‚
                  â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â””â”€â”€ Avalia â†’ FALSE
                              â”‚
                              â–¼
                  PrÃ³ximo Step ou Fim
```

### 19.5 IteraÃ§Ã£o - Fluxo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ITERAÃ‡ÃƒO (LOOP)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iterate:       â”‚
â”‚    over: arr    â”‚  Array: [item1, item2, item3]
â”‚    as: "item"   â”‚  ou
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  Range: "1..5"
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Iteration Context Setup                â”‚
â”‚  â€¢ index = 0                            â”‚
â”‚  â€¢ isFirst = true                       â”‚
â”‚  â€¢ isLast = false                       â”‚
â”‚  â€¢ variableName = "item"                â”‚
â”‚  â€¢ value = <current>                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â•”â•â•â•â•â–¼â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  Loop Iteration N                       â•‘
    â•‘                                         â•‘
    â•‘  Variables Available:                   â•‘
    â•‘  â€¢ {{item}} = current value             â•‘
    â•‘  â€¢ {{_iteration.index}} = N             â•‘
    â•‘  â€¢ {{_iteration.isFirst}} = boolean     â•‘
    â•‘  â€¢ {{_iteration.isLast}} = boolean      â•‘
    â•‘                                         â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
    â•‘  â”‚  1. Interpola variÃ¡veis     â”‚       â•‘
    â•‘  â”‚     com contexto atual      â”‚       â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
    â•‘             â–¼                           â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
    â•‘  â”‚  2. Executa Request         â”‚       â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
    â•‘             â–¼                           â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
    â•‘  â”‚  3. Assertions              â”‚       â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
    â•‘             â–¼                           â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
    â•‘  â”‚  4. Capture                 â”‚       â•‘
    â•‘  â”‚     "result_{{index}}"      â”‚       â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         â”‚
         â”œâ”€â”€â”€ Mais itens? â†’ Sim â”€â”€â”
         â”‚                        â”‚
         â”‚                        â””â”€â†’ Loop++
         â”‚
         â””â”€â”€â”€ NÃ£o mais itens
              â”‚
              â–¼
         PrÃ³ximo Step
```

### 19.6 Dependency Resolution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  RESOLUÃ‡ÃƒO DE DEPENDÃŠNCIAS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Suites Descobertas:
  â€¢ suite-a.yaml
  â€¢ suite-b.yaml
  â€¢ suite-c.yaml
  â€¢ suite-d.yaml

DependÃªncias Declaradas:
  suite-b â†’ depends: [suite-a]
  suite-c â†’ depends: [suite-a, suite-b]
  suite-d â†’ depends: [suite-c]

         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   DAG Builder   â”‚  (Directed Acyclic Graph)
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Cycle Detection â”‚  Verifica loops
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”œâ”€â”€â”€ Ciclo? â†’ Sim â†’ âŒ ERROR
                  â”‚
                  â””â”€â”€â”€ NÃ£o
                       â”‚
                       â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Topological Sort    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼

Ordem de ExecuÃ§Ã£o:

Level 0:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  suite-a  â”‚  (sem dependÃªncias)
          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
Level 1:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  suite-b  â”‚  (depende de suite-a)
          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
Level 2:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  suite-c  â”‚  (depende de suite-a + suite-b)
          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
Level 3:  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  suite-d  â”‚  (depende de suite-c)
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cache Strategy:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ suite-a executa â†’ exports cached        â”‚
â”‚    â†“                                    â”‚
â”‚ suite-b usa cache â†’ nÃ£o reexecuta       â”‚
â”‚    â†“                                    â”‚
â”‚ suite-c usa cache â†’ nÃ£o reexecuta       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 19.7 Step Call Cross-Suite

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    STEP CALL CROSS-SUITE                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Suite Caller (main.yaml)
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step com call:                     â”‚
â”‚    call:                            â”‚
â”‚      test: "./auth/login.yaml"      â”‚
â”‚      step: "login-step"             â”‚
â”‚      variables:                     â”‚
â”‚        user: "{{test_user}}"        â”‚
â”‚      isolate_context: true          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Resolve Path                    â”‚
â”‚     Relativo ou Absoluto            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Load Target Suite               â”‚
â”‚     (auth/login.yaml)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Find Step by ID                 â”‚
â”‚     step_id: "login-step"           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. Inject Variables                â”‚
â”‚     Mescla com contexto             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Execute Step                    â”‚
â”‚     â€¢ Request                       â”‚
â”‚     â€¢ Assertions                    â”‚
â”‚     â€¢ Captures                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€ isolate_context: true â”€â”€â”
         â”‚                                â–¼
         â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚  VariÃ¡veis em          â”‚
         â”‚                    â”‚  namespace:            â”‚
         â”‚                    â”‚  {{step-id.variable}}  â”‚
         â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€â”€â”€â”€â”€â”€ isolate_context: false â”€â”
                                          â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  VariÃ¡veis mesclam    â”‚
                              â”‚  diretamente no       â”‚
                              â”‚  escopo do caller     â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Continua execuÃ§Ã£o em Suite Caller
```

### 19.8 Retry Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RETRY MECHANISM                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step com Retry:
  metadata:
    retry:
      max_attempts: 3
      delay_ms: 1000

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Attempt 1      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ âœ… Success â†’ Continue
         â”‚
         â””â”€â”€â”€ âŒ Failure
              â”‚
              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Delay      â”‚  Wait 1000ms
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Attempt 2      â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â”œâ”€â”€â”€ âœ… Success â†’ Continue
                  â”‚
                  â””â”€â”€â”€ âŒ Failure
                       â”‚
                       â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Delay      â”‚  Wait 1000ms
                  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  Attempt 3      â”‚  (max_attempts)
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”œâ”€â”€â”€ âœ… Success â†’ Continue
                           â”‚
                           â””â”€â”€â”€ âŒ Failure
                                â”‚
                                â–¼
                           âŒ FINAL ERROR
                           (max attempts reached)

Retry aplicÃ¡vel em:
  â€¢ Request HTTP (timeout, 5xx errors)
  â€¢ Dependencies (falha na execuÃ§Ã£o)
  â€¢ Step Call (erro no step chamado)
```

---

## 20. Exemplos PrÃ¡ticos Completos

### 20.1 AutenticaÃ§Ã£o BÃ¡sica

```yaml
node_id: "auth-basic"
suite_name: "Basic Authentication"
base_url: "{{api_url}}"

variables:
  username: "{{$env.TEST_USERNAME}}"
  password: "{{$env.TEST_PASSWORD}}"

exports: ["auth_token"]

steps:
  - name: "Login"
    request:
      method: POST
      url: "/auth/login"
      body:
        username: "{{username}}"
        password: "{{password}}"
    assert:
      status_code: 200
      body:
        token: {exists: true}
    capture:
      auth_token: "body.token"
```

### 20.2 CRUD Completo

```yaml
node_id: "user-crud"
suite_name: "User CRUD Operations"
base_url: "{{api_url}}"

depends:
  - path: "./auth-basic.yaml"

variables:
  test_user:
    name: "{{$faker.person.fullName}}"
    email: "{{$faker.internet.email}}"

steps:
  # Create
  - name: "Create user"
    request:
      method: POST
      url: "/users"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
      body:
        name: "{{test_user.name}}"
        email: "{{test_user.email}}"
    assert:
      status_code: 201
      body:
        id: {exists: true}
    capture:
      user_id: "body.id"

  # Read
  - name: "Get user"
    request:
      method: GET
      url: "/users/{{user_id}}"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
    assert:
      status_code: 200
      body:
        id: {equals: "{{user_id}}"}
        email: {equals: "{{test_user.email}}"}

  # Update
  - name: "Update user"
    request:
      method: PUT
      url: "/users/{{user_id}}"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
      body:
        name: "Updated Name"
    assert:
      status_code: 200

  # Delete
  - name: "Delete user"
    request:
      method: DELETE
      url: "/users/{{user_id}}"
      headers:
        Authorization: "Bearer {{auth-basic.auth_token}}"
    assert:
      status_code: 204
```

### 20.3 Data-Driven Testing

```yaml
node_id: "validation-test"
suite_name: "Email Validation Tests"
base_url: "{{api_url}}"

variables:
  test_cases:
    - {email: "valid@example.com", expected: 200}
    - {email: "invalid", expected: 400}
    - {email: "", expected: 400}
    - {email: "no-at-sign.com", expected: 400}

steps:
  - name: "Test: {{test.email}}"
    iterate:
      over: "{{test_cases}}"
      as: "test"
    request:
      method: POST
      url: "/validate-email"
      body:
        email: "{{test.email}}"
    assert:
      status_code: "{{test.expected}}"
```

---

## 21. Guia de Troubleshooting

### Problemas Comuns

| Problema | SoluÃ§Ã£o |
|----------|---------|
| `Variable {{var}} not found` | Verificar definiÃ§Ã£o ou capture anterior |
| `JMESPath evaluation failed` | Testar em https://jmespath.org/ |
| `URL resolution error` | Verificar `base_url` e tipo de URL |
| `Assertion failed` | Adicionar `scenarios` para mÃºltiplos casos |
| `Timeout exceeded` | Aumentar `timeout` |
| `Circular dependency` | Revisar cadeia de `depends` |
| `Input timeout` | Definir `ci_default` e `timeout_seconds` |
| `Iteration failed` | Validar array nÃ£o estÃ¡ vazio |

### Debug Tips

```yaml
# Capturar tudo para debug
capture:
  debug_full: "@"
  debug_status: "status"
  debug_headers: "headers"
  debug_body: "body"

# Assertions verbosas
assert:
  custom:
    - name: "Debug"
      condition: "body"
      message: "Response: {{body}}"
```

### CLI Ãšteis

```bash
# Dry run
npx flow-test-engine --dry-run tests/suite.yaml

# Verbose
npx flow-test-engine --verbose tests/suite.yaml

# Listar testes
npx flow-test-engine --list
```

---

## 22. LimitaÃ§Ãµes Conhecidas
| `Assertion failed` | Adicionar `scenarios` para mÃºltiplos casos |
| `Timeout exceeded` | Aumentar `timeout` |
| `Circular dependency` | Revisar cadeia de `depends` |
| `Input timeout` | Definir `ci_default` e `timeout_seconds` |
| `Iteration failed` | Validar array nÃ£o estÃ¡ vazio |

### Debug Tips

```yaml
# Capturar tudo para debug
capture:
  debug_full: "@"
  debug_status: "status"
  debug_headers: "headers"
  debug_body: "body"

# Assertions verbosas
assert:
  custom:
    - name: "Debug"
      condition: "body"
      message: "Response: {{body}}"
```

### CLI Ãšteis

```bash
# Dry run
npx flow-test-engine --dry-run tests/suite.yaml

# Verbose
npx flow-test-engine --verbose tests/suite.yaml

# Listar testes
npx flow-test-engine --list
```

---

## 22. LimitaÃ§Ãµes Conhecidas

### TÃ©cnicas

| LimitaÃ§Ã£o | Workaround |
|-----------|------------|
| Input sÃ³ em sequential | Usar `execution_mode: sequential` |
| VariÃ¡vel de iteraÃ§Ã£o tem escopo limitado | Capturar antes do fim |
| Cross-suite requer execuÃ§Ã£o prÃ©via | Usar `depends` |
| Timeout nÃ£o Ã© por assertion | Usar no step/request |

### Boas PrÃ¡ticas

âœ… **DO:**
- Usar `node_id` Ãºnicos
- Definir `ci_default` para inputs
- Capturar variÃ¡veis essenciais
- Validar com mÃºltiplas assertions

âŒ **DON'T:**
- Parallel com input
- DependÃªncias circulares
- Timeouts muito curtos em CI
- Ignorar falhas sem motivo

---

## ğŸ“š Recursos Adicionais

- **RepositÃ³rio:** https://github.com/marcuspmd/flow-test
- **Exemplos:** `/tests` directory
- **Issues:** GitHub Issues
- **Wiki:** GitHub Wiki

---

**Flow Test Engine v1.0 - DocumentaÃ§Ã£o Oficial**
*Copyright Â© 2025 - Todos os direitos reservados*
