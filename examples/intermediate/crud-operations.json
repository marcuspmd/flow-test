{
  "suite_name": "CRUD Operations Flow",
  "node_id": "crud-operations-example-json",
  "description": "Complete CRUD flow demonstrating resource lifecycle management",
  "base_url": "http://localhost:8080",
  "metadata": {
    "priority": "high",
    "tags": [
      "intermediate",
      "crud",
      "rest",
      "json"
    ]
  },
  "variables": {
    "resource_name": "{{$faker.commerce.productName}}",
    "resource_price": "{{$faker.number.float}}",
    "resource_category": "{{$faker.commerce.department}}"
  },
  "exports": [
    "resource_id"
  ],
  "steps": [
    {
      "name": "Create new resource",
      "request": {
        "method": "POST",
        "url": "/post",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "name": "{{resource_name}}",
          "price": "{{resource_price}}",
          "category": "{{resource_category}}",
          "active": true,
          "stock": 100
        }
      },
      "assert": {
        "status_code": 200,
        "body": {
          "json": {
            "name": {
              "equals": "{{resource_name}}"
            },
            "price": {
              "type": "number"
            },
            "active": {
              "equals": true
            }
          }
        }
      },
      "capture": {
        "resource_id": "{{$faker.number.int}}",
        "created_resource": "body.json"
      }
    },
    {
      "name": "Read created resource",
      "request": {
        "method": "GET",
        "url": "/get?id={{resource_id}}",
        "headers": {
          "Accept": "application/json"
        }
      },
      "assert": {
        "status_code": 200,
        "body": {
          "args": {
            "id": {
              "equals": "{{resource_id}}"
            }
          }
        }
      },
      "capture": {
        "fetched_resource": "body"
      }
    },
    {
      "name": "Update resource (full update)",
      "request": {
        "method": "PUT",
        "url": "/put",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "id": "{{resource_id}}",
          "name": "{{resource_name}} - Updated",
          "price": 99.99,
          "category": "{{resource_category}}",
          "active": true,
          "stock": 75
        }
      },
      "assert": {
        "status_code": 200,
        "body": {
          "json": {
            "name": {
              "contains": "Updated"
            },
            "price": {
              "equals": 99.99
            },
            "stock": {
              "equals": 75
            }
          }
        }
      },
      "capture": {
        "updated_resource": "body.json"
      }
    },
    {
      "name": "Partial update resource",
      "request": {
        "method": "PATCH",
        "url": "/patch",
        "headers": {
          "Content-Type": "application/json"
        },
        "body": {
          "stock": 50,
          "active": false
        }
      },
      "assert": {
        "status_code": 200,
        "body": {
          "json": {
            "stock": {
              "equals": 50
            },
            "active": {
              "equals": false
            }
          }
        }
      }
    },
    {
      "name": "Verify resource was updated",
      "request": {
        "method": "GET",
        "url": "/get?id={{resource_id}}"
      },
      "assert": {
        "status_code": 200
      }
    },
    {
      "name": "Delete resource",
      "request": {
        "method": "DELETE",
        "url": "/delete?id={{resource_id}}"
      },
      "assert": {
        "status_code": 200
      }
    },
    {
      "name": "Verify resource was deleted",
      "request": {
        "method": "GET",
        "url": "/status/404"
      },
      "assert": {
        "status_code": 404
      },
      "continue_on_failure": true
    }
  ]
}