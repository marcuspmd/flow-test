# Teste para validar importação de variáveis com prefixo
suite_name: "Teste de Importação de Login"

base_url: "https://httpbin.org"

# Simula a importação do fluxo de login usando httpbin
imports:
  - name: "login"
    path: "../flows/mock-login-flow.yaml"
    variables:
      username: "test_user"
      password: "test_pass"

steps:
  - name: "Usar token do login importado"
    request:
      method: POST
      url: "/post"
      headers:
        Content-Type: "application/json"
        Authorization: "Bearer {{login.token}}"
        X-Refresh-Token: "{{login.refreshToken}}"
      body:
        message: "Usando tokens do fluxo de login"
        user: "{{login.username}}"

    assert:
      status_code: 200

    capture:
      final_result: "body.json.message"